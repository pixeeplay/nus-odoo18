<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Vue Monitor Import avec design amÃ©liorÃ© -->
    <record id="view_code2asin_monitor_form" model="ir.ui.view">
        <field name="name">code2asin.monitor.form</field>
        <field name="model">code2asin.monitor</field>
        <field name="arch" type="xml">
            <form string="Import Monitor" create="false" edit="false">
                
                <!-- En-tÃªte avec boutons de contrÃ´le -->
                <header>
                    <button name="action_refresh_status" string="ðŸ”„ RafraÃ®chir" type="object" class="btn-primary"/>
                    <button name="action_stop_import" string="â¹ï¸ ArrÃªter Import" type="object" class="btn-danger" 
                            invisible="not import_running"/>
                    <button name="action_view_detailed_logs" string="ðŸ“‹ Logs DÃ©taillÃ©s" type="object" class="btn-secondary"/>
                </header>
                
                <sheet>
                    <!-- Titre avec session -->
                    <div class="oe_title">
                        <h1>
                            <field name="session_title" readonly="1"/>
                        </h1>
                        <h3>
                            <field name="current_status" readonly="1"/>
                        </h3>
                    </div>
                    
                    <!-- Statistiques visuelles -->
                    <group col="4">
                        <field name="total_products" string="Produits Total"/>
                        <field name="processed_count" string="TraitÃ©s"/>
                        <field name="success_count" string="SuccÃ¨s"/>
                        <field name="error_count" string="Erreurs"/>
                    </group>
                    
                    <!-- Barre de progression visuelle -->
                    <group string="ðŸ“Š Progression" col="1">
                        <field name="progress_percentage" widget="progressbar" readonly="1"/>
                        <field name="progress_text" readonly="1"/>
                    </group>
                    
                    <!-- Informations contextuelles -->
                    <group string="ðŸ—‚ï¸ Informations Fichier" col="2">
                        <field name="filename" readonly="1" invisible="not filename"/>
                        <field name="supplier_name" readonly="1" invisible="not supplier_name"/>
                        <field name="file_size" readonly="1" invisible="not file_size"/>
                        <field name="start_time" readonly="1"/>
                        <field name="estimated_end_time" readonly="1" invisible="not import_running"/>
                        <field name="duration" readonly="1" invisible="import_running"/>
                    </group>
                    
                    <!-- RÃ©sumÃ© des actions -->
                    <group string="ðŸ“‹ RÃ©sumÃ© des Actions" col="1">
                        <field name="last_actions" readonly="1" nolabel="1" widget="html"/>
                    </group>
                    
                    <!-- DÃ©tails de performance -->
                    <group string="âš¡ Performance" col="3" invisible="not import_running">
                        <field name="products_per_minute" readonly="1"/>
                        <field name="images_processed" readonly="1"/>
                        <field name="current_phase" readonly="1"/>
                    </group>
                    
                    <!-- Champs techniques cachÃ©s -->
                    <group invisible="1">
                        <field name="import_running"/>
                        <field name="import_session_id"/>
                    </group>
                    
                </sheet>
            </form>
        </field>
    </record>
    
    <!-- Action pour ouvrir le monitor -->
    <record id="action_code2asin_monitor" model="ir.actions.act_window">
        <field name="name">Import Monitor</field>
        <field name="res_model">code2asin.monitor</field>
        <field name="view_mode">form</field>
        <field name="target">current</field>
        <field name="context">{'form_view_initial_mode': 'readonly'}</field>
    </record>
    
</odoo>
