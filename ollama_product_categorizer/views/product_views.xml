<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Inherit product.template form: add AI Category notebook page -->
    <record id="product_template_form_view_ai_category" model="ir.ui.view">
        <field name="name">product.template.form.ai.category</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <notebook position="inside">
                <page string="AI Category" name="ai_category">
                    <div class="alert alert-secondary mb-3" role="alert">
                        <i class="fa fa-microchip me-1"/>
                        AI-powered product categorization. Click <strong>Categorize</strong> to
                        request an AI suggestion, then <strong>Apply Category</strong> to map it
                        to an Odoo product category.
                    </div>
                    <group>
                        <group string="AI Categorization">
                            <field name="ai_category_taxonomy"/>
                            <field name="ai_category_suggestion" readonly="1"/>
                            <field name="ai_category_path" readonly="1"/>
                            <field name="ai_category_confidence" readonly="1"
                                   widget="progressbar"
                                   options="{'max_value': 100}"/>
                            <field name="ai_category_date" readonly="1"/>
                        </group>
                        <group string="Actions">
                            <div class="mb-2">
                                <button name="action_categorize_product"
                                        string="Categorize with AI"
                                        type="object"
                                        class="btn-primary"
                                        icon="fa-magic"/>
                            </div>
                            <div class="mb-2">
                                <button name="action_apply_category"
                                        string="Apply Category Mapping"
                                        type="object"
                                        class="btn-secondary"
                                        icon="fa-check"
                                        invisible="not ai_category_suggestion"/>
                            </div>
                        </group>
                    </group>
                </page>
            </notebook>
        </field>
    </record>

</odoo>
